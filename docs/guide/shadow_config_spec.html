<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Shadow Config Specification - The Shadow Simulator</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="shadow.html">The Shadow Simulator</a></li><li class="chapter-item expanded "><a href="design_2x.html"><strong aria-hidden="true">1.</strong> Design Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="security.html"><strong aria-hidden="true">1.1.</strong> Non-goal: Security</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Installation Guide</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="supported_platforms.html"><strong aria-hidden="true">2.1.</strong> Supported Platforms</a></li><li class="chapter-item expanded "><a href="install_dependencies.html"><strong aria-hidden="true">2.2.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="install_shadow.html"><strong aria-hidden="true">2.3.</strong> Shadow</a></li><li class="chapter-item expanded "><a href="system_configuration.html"><strong aria-hidden="true">2.4.</strong> System Configuration</a></li><li class="chapter-item expanded "><a href="install_shadow_with_docker.html"><strong aria-hidden="true">2.5.</strong> (Experimental) Shadow with Docker</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Usage Guide</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="run_shadow_overview.html"><strong aria-hidden="true">3.1.</strong> Overview</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Running Your First Simulations</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="getting_started_basic.html"><strong aria-hidden="true">3.2.1.</strong> Basic File Transfer</a></li><li class="chapter-item expanded "><a href="getting_started_tgen.html"><strong aria-hidden="true">3.2.2.</strong> Traffic Generation</a></li><li class="chapter-item expanded "><a href="getting_started_tor.html"><strong aria-hidden="true">3.2.3.</strong> Simple Tor Network</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Understanding Shadow Output</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="log_format.html"><strong aria-hidden="true">3.3.1.</strong> Format of the Log Messages</a></li><li class="chapter-item expanded "><a href="parsing_shadow_logs.html"><strong aria-hidden="true">3.3.2.</strong> Parsing Statistics from the Logs</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.4.</strong> Configuring Your Own Simulation</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="shadow_config_overview.html"><strong aria-hidden="true">3.4.1.</strong> Shadow Config Overview</a></li><li class="chapter-item expanded "><a href="shadow_config_spec.html" class="active"><strong aria-hidden="true">3.4.2.</strong> Shadow Config Specification</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.5.</strong> Configuring Your Own Network</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="network_graph_overview.html"><strong aria-hidden="true">3.5.1.</strong> Network Graph Overview</a></li><li class="chapter-item expanded "><a href="network_graph_spec.html"><strong aria-hidden="true">3.5.2.</strong> Network Graph Specification</a></li></ol></li><li class="chapter-item expanded "><a href="migrating_from_1x.html"><strong aria-hidden="true">3.6.</strong> Migrating Simulations from Shadow 1.x</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.7.</strong> Performance Tuning</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="sidechannels.html"><strong aria-hidden="true">3.7.1.</strong> Disabling Side-channel Mitigations</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Developer Guides</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="developer_guide.html"><strong aria-hidden="true">4.1.</strong> Debugging and profiling</a></li><li class="chapter-item expanded "><a href="ci.html"><strong aria-hidden="true">4.2.</strong> Continous integration tests</a></li></ol></li><li class="chapter-item expanded "><a href="contributing.html"><strong aria-hidden="true">5.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="coding_style.html"><strong aria-hidden="true">5.1.</strong> Coding style</a></li><li class="chapter-item expanded "><a href="pull_requests.html"><strong aria-hidden="true">5.2.</strong> Pull requests</a></li></ol></li><li class="chapter-item expanded "><a href="maintainer_playbook.html"><strong aria-hidden="true">6.</strong> Maintainer playbook</a></li><li class="chapter-item expanded "><a href="nsf_sponsorship.html"><strong aria-hidden="true">7.</strong> NSF Sponsorship</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Shadow Simulator</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shadow/shadow" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="shadow-configuration-specification"><a class="header" href="#shadow-configuration-specification">Shadow Configuration Specification</a></h1>
<p>Shadow uses the standard YAML format to accept configuration options from users.
The following describes Shadow's YAML format and all of the options that Shadow
supports that can be used to customize a simulation.</p>
<p>Example:</p>
<pre><code class="language-yaml">general:
  stop_time: 2 min
network:
  graph:
    type: 1_gbit_switch
hosts:
  server:
    processes:
    - path: /usr/sbin/nginx
      args: -c ../../../nginx.conf -p .
      start_time: 1
  client:
    quantity: 20
    processes:
    - path: /usr/bin/curl
      args: server --silent
      start_time: 5
</code></pre>
<h2 id="contents"><a class="header" href="#contents">Contents:</a></h2>
<ul>
<li><a href="#general"><code>general</code></a></li>
<li><a href="#generalbootstrap_end_time"><code>general.bootstrap_end_time</code></a></li>
<li><a href="#generaldata_directory"><code>general.data_directory</code></a></li>
<li><a href="#generalheartbeat_interval"><code>general.heartbeat_interval</code></a></li>
<li><a href="#generallog_level"><code>general.log_level</code></a></li>
<li><a href="#generalparallelism"><code>general.parallelism</code></a></li>
<li><a href="#generalseed"><code>general.seed</code></a></li>
<li><a href="#generalstop_time"><code>general.stop_time</code></a></li>
<li><a href="#generaltemplate_directory"><code>general.template_directory</code></a></li>
<li><a href="#network"><code>network</code></a></li>
<li><a href="#networkgraph"><code>network.graph</code></a></li>
<li><a href="#networkgraphtype"><code>network.graph.type</code></a></li>
<li><a href="#networkgraphpathinline"><code>network.graph.&lt;path|inline&gt;</code></a></li>
<li><a href="#networkuse_shortest_path"><code>network.use_shortest_path</code></a></li>
<li><a href="#experimental"><code>experimental</code></a></li>
<li><a href="#experimentalinterface_buffer"><code>experimental.interface_buffer</code></a></li>
<li><a href="#experimentalinterface_qdisc"><code>experimental.interface_qdisc</code></a></li>
<li><a href="#experimentalinterpose_method"><code>experimental.interpose_method</code></a></li>
<li><a href="#experimentalpreload_spin_max"><code>experimental.preload_spin_max</code></a></li>
<li><a href="#experimentalrunahead"><code>experimental.runahead</code></a></li>
<li><a href="#experimentalscheduler_policy"><code>experimental.scheduler_policy</code></a></li>
<li><a href="#experimentalsocket_recv_autotune"><code>experimental.socket_recv_autotune</code></a></li>
<li><a href="#experimentalsocket_recv_buffer"><code>experimental.socket_recv_buffer</code></a></li>
<li><a href="#experimentalsocket_send_autotune"><code>experimental.socket_send_autotune</code></a></li>
<li><a href="#experimentalsocket_send_buffer"><code>experimental.socket_send_buffer</code></a></li>
<li><a href="#experimentaluse_cpu_pinning"><code>experimental.use_cpu_pinning</code></a></li>
<li><a href="#experimentaluse_explicit_block_message"><code>experimental.use_explicit_block_message</code></a></li>
<li><a href="#experimentaluse_legacy_working_dir"><code>experimental.use_legacy_working_dir</code></a></li>
<li><a href="#experimentaluse_memory_manager"><code>experimental.use_memory_manager</code></a></li>
<li><a href="#experimentaluse_o_n_waitpid_workarounds"><code>experimental.use_o_n_waitpid_workarounds</code></a></li>
<li><a href="#experimentaluse_object_counters"><code>experimental.use_object_counters</code></a></li>
<li><a href="#experimentaluse_openssl_rng_preload"><code>experimental.use_openssl_rng_preload</code></a></li>
<li><a href="#experimentaluse_sched_fifo"><code>experimental.use_sched_fifo</code></a></li>
<li><a href="#experimentaluse_shim_syscall_handler"><code>experimental.use_shim_syscall_handler</code></a></li>
<li><a href="#experimentaluse_seccomp"><code>experimental.use_seccomp</code></a></li>
<li><a href="#experimentaluse_syscall_counters"><code>experimental.use_syscall_counters</code></a></li>
<li><a href="#experimentalworker_threads"><code>experimental.worker_threads</code></a></li>
<li><a href="#host_defaults"><code>host_defaults</code></a></li>
<li><a href="#host_defaultscity_code_hint"><code>host_defaults.city_code_hint</code></a></li>
<li><a href="#host_defaultscountry_code_hint"><code>host_defaults.country_code_hint</code></a></li>
<li><a href="#host_defaultsheartbeat_interval"><code>host_defaults.heartbeat_interval</code></a></li>
<li><a href="#host_defaultsheartbeat_log_info"><code>host_defaults.heartbeat_log_info</code></a></li>
<li><a href="#host_defaultsheartbeat_log_level"><code>host_defaults.heartbeat_log_level</code></a></li>
<li><a href="#host_defaultsip_address_hint"><code>host_defaults.ip_address_hint</code></a></li>
<li><a href="#host_defaultslog_level"><code>host_defaults.log_level</code></a></li>
<li><a href="#host_defaultspcap_directory"><code>host_defaults.pcap_directory</code></a></li>
<li><a href="#hosts"><code>hosts</code></a></li>
<li><a href="#hostshostnamebandwidth_down"><code>hosts.&lt;hostname&gt;.bandwidth_down</code></a></li>
<li><a href="#hostshostnamebandwidth_up"><code>hosts.&lt;hostname&gt;.bandwidth_up</code></a></li>
<li><a href="#hostshostnameoptions"><code>hosts.&lt;hostname&gt;.options</code></a></li>
<li><a href="#hostshostnamequantity"><code>hosts.&lt;hostname&gt;.quantity</code></a></li>
<li><a href="#hostshostnameprocesses"><code>hosts.&lt;hostname&gt;.processes</code></a></li>
<li><a href="#hostshostnameprocessesargs"><code>hosts.&lt;hostname&gt;.processes[*].args</code></a></li>
<li><a href="#hostshostnameprocessesenvironment"><code>hosts.&lt;hostname&gt;.processes[*].environment</code></a></li>
<li><a href="#hostshostnameprocessespath"><code>hosts.&lt;hostname&gt;.processes[*].path</code></a></li>
<li><a href="#hostshostnameprocessesquantity"><code>hosts.&lt;hostname&gt;.processes[*].quantity</code></a></li>
<li><a href="#hostshostnameprocessesstart_time"><code>hosts.&lt;hostname&gt;.processes[*].start_time</code></a></li>
<li><a href="#hostshostnameprocessesstop_time"><code>hosts.&lt;hostname&gt;.processes[*].stop_time</code></a></li>
</ul>
<h4 id="general"><a class="header" href="#general"><code>general</code></a></h4>
<p><em>Required</em></p>
<p>General experiment settings.</p>
<h4 id="generalbootstrap_end_time"><a class="header" href="#generalbootstrap_end_time"><code>general.bootstrap_end_time</code></a></h4>
<p>Default: &quot;0 sec&quot;<br />
Type: String OR Integer</p>
<p>The simulated time that ends Shadow's high network bandwidth/reliability
bootstrap period.</p>
<p>If the bootstrap end time is greater than 0, Shadow uses a simulation
bootstrapping period where hosts have unrestricted network bandwidth and no
packet drop. This can help to bootstrap large networks quickly when the network
hosts have low network bandwidth or low network reliability.</p>
<h4 id="generaldata_directory"><a class="header" href="#generaldata_directory"><code>general.data_directory</code></a></h4>
<p>Default: &quot;shadow.data&quot;<br />
Type: String</p>
<p>Path to store simulation output.</p>
<h4 id="generalheartbeat_interval"><a class="header" href="#generalheartbeat_interval"><code>general.heartbeat_interval</code></a></h4>
<p>Default: &quot;1 sec&quot;<br />
Type: String OR Integer</p>
<p>Interval at which to print heartbeat messages.</p>
<h4 id="generallog_level"><a class="header" href="#generallog_level"><code>general.log_level</code></a></h4>
<p>Default: &quot;info&quot;<br />
Type: &quot;error&quot; OR &quot;warning&quot; OR &quot;info&quot; OR &quot;debug&quot; OR &quot;trace&quot;</p>
<p>Log level of output written on stdout. If Shadow was built in release mode, then
messages at level 'trace' will always be dropped.</p>
<h4 id="generalparallelism"><a class="header" href="#generalparallelism"><code>general.parallelism</code></a></h4>
<p>Default: 1<br />
Type: Integer</p>
<p>How many parallel threads to use to run the simulation. Optimal performance is
usually obtained with <code>nproc</code>, or sometimes <code>nproc/2</code> with hyperthreading.</p>
<p>Virtual hosts depend on network packets that can potentially arrive from other
virtual hosts, so each worker can only advance according to the propagation
delay to avoid dependency violations. Therefore, not all threads will have 100%
CPU utilization.</p>
<h4 id="generalseed"><a class="header" href="#generalseed"><code>general.seed</code></a></h4>
<p>Default: 1<br />
Type: Integer</p>
<p>Initialize randomness using seed N.</p>
<h4 id="generalstop_time"><a class="header" href="#generalstop_time"><code>general.stop_time</code></a></h4>
<p><em>Required</em><br />
Type: String OR Integer</p>
<p>The simulated time at which simulated processes are sent a SIGKILL signal.</p>
<h4 id="generaltemplate_directory"><a class="header" href="#generaltemplate_directory"><code>general.template_directory</code></a></h4>
<p>Default: null<br />
Type: String OR null</p>
<p>Path to recursively copy during startup and use as the data-directory.</p>
<h4 id="network"><a class="header" href="#network"><code>network</code></a></h4>
<p><em>Required</em></p>
<p>Network settings.</p>
<h4 id="networkgraph"><a class="header" href="#networkgraph"><code>network.graph</code></a></h4>
<p><em>Required</em></p>
<p>The network topology graph.</p>
<p>A network topology represented by a connected graph with certain attributes
specified on the network nodes and edges. For more information on how to
structure this data, see the <a href="network_graph_overview.html">Network Graph Overview</a>.</p>
<p>Example:</p>
<pre><code class="language-yaml">network:
  graph:
    type: gml
    inline: |
      graph [
        ...
      ]
</code></pre>
<h4 id="networkgraphtype"><a class="header" href="#networkgraphtype"><code>network.graph.type</code></a></h4>
<p><em>Required</em><br />
Type: &quot;gml&quot; OR &quot;1_gbit_switch&quot;</p>
<p>The network graph can be specified in the GML format, or a built-in
&quot;1_gbit_switch&quot; graph with a single network node can be used instead.</p>
<p>The built-in &quot;1_gbit_switch&quot; graph contains the following:</p>
<pre><code class="language-text">graph [
  directed 0
  node [
    id 0
    ip_address &quot;0.0.0.0&quot;
    bandwidth_up &quot;1 Gbit&quot;
    bandwidth_down &quot;1 Gbit&quot;
  ]
  edge [
    source 0
    target 0
    latency &quot;1 ms&quot;
    packet_loss 0.0
  ]
]
</code></pre>
<h4 id="networkgraphpathinline"><a class="header" href="#networkgraphpathinline"><code>network.graph.&lt;path|inline&gt;</code></a></h4>
<p><em>Required if <code>network.graph.type</code> is &quot;gml&quot;</em><br />
Type: String</p>
<p>If the network graph type is not a built-in network graph, the graph data can be
specified as a path to an external file, or as an inline string.</p>
<p>If a path is given and begins with <code>~/</code>, it will be considered relative to the
current user's home directory.</p>
<h4 id="networkuse_shortest_path"><a class="header" href="#networkuse_shortest_path"><code>network.use_shortest_path</code></a></h4>
<p><em>Required</em><br />
Type: Bool</p>
<p>When routing packets, follow the shortest path rather than following a direct
edge between network nodes. If false, the network graph is required to be
complete.</p>
<h4 id="experimental"><a class="header" href="#experimental"><code>experimental</code></a></h4>
<p>Experimental experiment settings. Unstable and may change or be removed at any
time, regardless of Shadow version.</p>
<h4 id="experimentalinterface_buffer"><a class="header" href="#experimentalinterface_buffer"><code>experimental.interface_buffer</code></a></h4>
<p>Default: &quot;1024000 B&quot;<br />
Type: String OR Integer</p>
<p>Size of the interface receive buffer that accepts incoming packets.</p>
<h4 id="experimentalinterface_qdisc"><a class="header" href="#experimentalinterface_qdisc"><code>experimental.interface_qdisc</code></a></h4>
<p>Default: &quot;fifo&quot;<br />
Type: &quot;fifo&quot; OR &quot;roundrobin&quot;</p>
<p>The queueing discipline to use at the network interface.</p>
<h4 id="experimentalinterpose_method"><a class="header" href="#experimentalinterpose_method"><code>experimental.interpose_method</code></a></h4>
<p>Default: &quot;ptrace&quot;<br />
Type: &quot;ptrace&quot; OR &quot;preload&quot;</p>
<p>Which interposition method to use.</p>
<h4 id="experimentalpreload_spin_max"><a class="header" href="#experimentalpreload_spin_max"><code>experimental.preload_spin_max</code></a></h4>
<p>Default: 0<br />
Type: Integer</p>
<p>Max number of iterations to busy-wait on IPC semaphore before blocking.</p>
<h4 id="experimentalrunahead"><a class="header" href="#experimentalrunahead"><code>experimental.runahead</code></a></h4>
<p>Default: null<br />
Type: String OR null</p>
<p>If set, overrides the automatically calculated minimum time workers may run
ahead when sending events between virtual hosts.</p>
<h4 id="experimentalscheduler_policy"><a class="header" href="#experimentalscheduler_policy"><code>experimental.scheduler_policy</code></a></h4>
<p>Default: &quot;host&quot;<br />
Type: &quot;host&quot; OR &quot;steal&quot; OR &quot;thread&quot; OR &quot;threadxthread&quot; OR &quot;threadxhost&quot;</p>
<p>The event scheduler's policy for thread synchronization.</p>
<h4 id="experimentalsocket_recv_autotune"><a class="header" href="#experimentalsocket_recv_autotune"><code>experimental.socket_recv_autotune</code></a></h4>
<p>Default: true<br />
Type: Bool</p>
<p>Enable receive window autotuning.</p>
<h4 id="experimentalsocket_recv_buffer"><a class="header" href="#experimentalsocket_recv_buffer"><code>experimental.socket_recv_buffer</code></a></h4>
<p>Default: &quot;174760 B&quot;<br />
Type: String OR Integer</p>
<p>Initial size of the socket's receive buffer.</p>
<h4 id="experimentalsocket_send_autotune"><a class="header" href="#experimentalsocket_send_autotune"><code>experimental.socket_send_autotune</code></a></h4>
<p>Default: true<br />
Type: Bool</p>
<p>Enable send window autotuning.</p>
<h4 id="experimentalsocket_send_buffer"><a class="header" href="#experimentalsocket_send_buffer"><code>experimental.socket_send_buffer</code></a></h4>
<p>Default: &quot;131072 B&quot;<br />
Type: String OR Integer</p>
<p>Initial size of the socket's send buffer.</p>
<h4 id="experimentaluse_cpu_pinning"><a class="header" href="#experimentaluse_cpu_pinning"><code>experimental.use_cpu_pinning</code></a></h4>
<p>Default: true<br />
Type: Bool</p>
<p>Pin each thread and any processes it executes to the same logical CPU Core to
improve cache affinity.</p>
<h4 id="experimentaluse_explicit_block_message"><a class="header" href="#experimentaluse_explicit_block_message"><code>experimental.use_explicit_block_message</code></a></h4>
<p>Default: false<br />
Type: Bool</p>
<p>Send message to managed process telling it to stop spinning when a syscall
blocks.</p>
<h4 id="experimentaluse_legacy_working_dir"><a class="header" href="#experimentaluse_legacy_working_dir"><code>experimental.use_legacy_working_dir</code></a></h4>
<p>Default: false<br />
Type: Bool</p>
<p>Don't adjust the working directories of the virtual processes.</p>
<h4 id="experimentaluse_memory_manager"><a class="header" href="#experimentaluse_memory_manager"><code>experimental.use_memory_manager</code></a></h4>
<p>Default: true<br />
Type: Bool</p>
<p>Use the MemoryManager. It can be useful to disable for debugging, but will hurt
performance in most cases.</p>
<h4 id="experimentaluse_o_n_waitpid_workarounds"><a class="header" href="#experimentaluse_o_n_waitpid_workarounds"><code>experimental.use_o_n_waitpid_workarounds</code></a></h4>
<p>Default: false<br />
Type: Bool</p>
<p>Use performance workarounds for waitpid being O(n). Beneficial to disable if
waitpid is patched to be O(1), if using one logical processor per host, or in
some cases where it'd otherwise result in excessive detaching and reattaching.</p>
<h4 id="experimentaluse_object_counters"><a class="header" href="#experimentaluse_object_counters"><code>experimental.use_object_counters</code></a></h4>
<p>Default: true<br />
Type: Bool</p>
<p>Count object allocations and deallocations. If disabled, we will not be able to
detect object memory leaks.</p>
<h4 id="experimentaluse_openssl_rng_preload"><a class="header" href="#experimentaluse_openssl_rng_preload"><code>experimental.use_openssl_rng_preload</code></a></h4>
<p>Default: true<br />
Type: Bool</p>
<p>Preload our OpenSSL RNG library for all managed processes to mitigate
non-deterministic use of OpenSSL.</p>
<h4 id="experimentaluse_sched_fifo"><a class="header" href="#experimentaluse_sched_fifo"><code>experimental.use_sched_fifo</code></a></h4>
<p>Default: false<br />
Type: Bool</p>
<p>Use the SCHED_FIFO scheduler. Requires CAP_SYS_NICE. See sched(7),
capabilities(7).</p>
<h4 id="experimentaluse_shim_syscall_handler"><a class="header" href="#experimentaluse_shim_syscall_handler"><code>experimental.use_shim_syscall_handler</code></a></h4>
<p>Default: true<br />
Type: Bool</p>
<p>Use shim-side syscall handler to force hot-path syscalls to be handled via an
inter-process syscall with Shadow.</p>
<h4 id="experimentaluse_seccomp"><a class="header" href="#experimentaluse_seccomp"><code>experimental.use_seccomp</code></a></h4>
<p>Default: true iff experimental.interpose_method == preload.
Type: Bool</p>
<p>Use seccomp to trap syscalls.</p>
<h4 id="experimentaluse_syscall_counters"><a class="header" href="#experimentaluse_syscall_counters"><code>experimental.use_syscall_counters</code></a></h4>
<p>Default: false<br />
Type: Bool</p>
<p>Count the number of occurrences for individual syscalls.</p>
<h4 id="experimentalworker_threads"><a class="header" href="#experimentalworker_threads"><code>experimental.worker_threads</code></a></h4>
<p>Default: # of hosts in the simulation<br />
Type: Integer</p>
<p>Create N worker threads. Note though, that <code>general.parallelism</code> of them will be
allowed to run simultaneously. If unset, will create a thread for each simulated
Host. This is to work around limitations in ptrace, and may change in the
future.</p>
<h4 id="host_defaults"><a class="header" href="#host_defaults"><code>host_defaults</code></a></h4>
<p>Default options for all hosts. These options can also be overridden for each
host individually.</p>
<h4 id="host_defaultscity_code_hint"><a class="header" href="#host_defaultscity_code_hint"><code>host_defaults.city_code_hint</code></a></h4>
<p>Default: null<br />
Type: String OR null</p>
<p>City code hint for Shadow's name and routing system.</p>
<p>This hint will be used to assign the host to a network node based on the city
codes of nodes in the network graph.</p>
<h4 id="host_defaultscountry_code_hint"><a class="header" href="#host_defaultscountry_code_hint"><code>host_defaults.country_code_hint</code></a></h4>
<p>Default: null<br />
Type: String OR null</p>
<p>Country code hint for Shadow's name and routing system (ex: &quot;US&quot;).</p>
<p>This hint will be used to assign the host to a network node based on the country
codes of nodes in the network graph.</p>
<h4 id="host_defaultsheartbeat_interval"><a class="header" href="#host_defaultsheartbeat_interval"><code>host_defaults.heartbeat_interval</code></a></h4>
<p>Default: &quot;1 sec&quot;<br />
Type: String OR Integer</p>
<p>Amount of time between heartbeat messages for this host.</p>
<h4 id="host_defaultsheartbeat_log_info"><a class="header" href="#host_defaultsheartbeat_log_info"><code>host_defaults.heartbeat_log_info</code></a></h4>
<p>Default: [&quot;node&quot;]<br />
Type: Array of (&quot;node&quot; OR &quot;socket&quot; OR &quot;ram&quot;)</p>
<p>List of information to show in the host's heartbeat message.</p>
<h4 id="host_defaultsheartbeat_log_level"><a class="header" href="#host_defaultsheartbeat_log_level"><code>host_defaults.heartbeat_log_level</code></a></h4>
<p>Default: &quot;info&quot;<br />
Type: &quot;error&quot; OR &quot;warning&quot; OR &quot;info&quot; OR &quot;debug&quot; OR &quot;trace&quot;</p>
<p>Log level at which to print host statistics.</p>
<h4 id="host_defaultsip_address_hint"><a class="header" href="#host_defaultsip_address_hint"><code>host_defaults.ip_address_hint</code></a></h4>
<p>Default: null<br />
Type: String OR null</p>
<p>IPv4 address hint for Shadow's name and routing system (ex: &quot;100.0.0.1&quot;).</p>
<p>This hint will be used to assign the host to a network node based on the IP
values of nodes in the network graph.</p>
<h4 id="host_defaultslog_level"><a class="header" href="#host_defaultslog_level"><code>host_defaults.log_level</code></a></h4>
<p>Default: null<br />
Type: &quot;error&quot; OR &quot;warning&quot; OR &quot;info&quot; OR &quot;debug&quot; OR &quot;trace&quot; OR null</p>
<p>Log level at which to print host log messages.</p>
<h4 id="host_defaultspcap_directory"><a class="header" href="#host_defaultspcap_directory"><code>host_defaults.pcap_directory</code></a></h4>
<p>Default: null<br />
Type: String OR null</p>
<p>Where to save the pcap files (relative to the host directory).</p>
<p>Logs all network input and output for this host in PCAP format (for viewing in
e.g. wireshark).</p>
<h4 id="hosts"><a class="header" href="#hosts"><code>hosts</code></a></h4>
<p><em>Required</em><br />
Type: Object</p>
<p>The simulated hosts which execute processes. Each field corresponds to a host
configuration, with the field name being used as the network hostname.</p>
<p>Shadow assigns each host to a network node in the <a href="network_graph_overview.html">network graph</a>.</p>
<h4 id="hostshostnamebandwidth_down"><a class="header" href="#hostshostnamebandwidth_down"><code>hosts.&lt;hostname&gt;.bandwidth_down</code></a></h4>
<p>Default: null<br />
Type: String OR Integer OR null</p>
<p>Downstream bandwidth capacity of the host.</p>
<p>Overrides any default bandwidth values set in the assigned network graph
node.</p>
<h4 id="hostshostnamebandwidth_up"><a class="header" href="#hostshostnamebandwidth_up"><code>hosts.&lt;hostname&gt;.bandwidth_up</code></a></h4>
<p>Default: null<br />
Type: String OR Integer OR null</p>
<p>Upstream bandwidth capacity of the host.</p>
<p>Overrides any default bandwidth values set in the assigned network graph
node.</p>
<h4 id="hostshostnameoptions"><a class="header" href="#hostshostnameoptions"><code>hosts.&lt;hostname&gt;.options</code></a></h4>
<p>See <a href="#host_defaults"><code>host_defaults</code></a>.</p>
<h4 id="hostshostnamequantity"><a class="header" href="#hostshostnamequantity"><code>hosts.&lt;hostname&gt;.quantity</code></a></h4>
<p>Default: 1<br />
Type: Integer</p>
<p>Number of hosts to start.</p>
<p>If quantity is greater than 1, each host's hostname will be suffixed with a
counter. For example, a host with an id of <code>host</code> and quantity of 2 would
produce hosts with hostnames <code>host1</code> and <code>host2</code>.</p>
<h4 id="hostshostnameprocesses"><a class="header" href="#hostshostnameprocesses"><code>hosts.&lt;hostname&gt;.processes</code></a></h4>
<p><em>Required</em><br />
Type: Array</p>
<p>Virtual software processes that the host will run.</p>
<h4 id="hostshostnameprocessesargs"><a class="header" href="#hostshostnameprocessesargs"><code>hosts.&lt;hostname&gt;.processes[*].args</code></a></h4>
<p>Default: &quot;&quot;<br />
Type: String OR Array of String</p>
<p>Process arguments.</p>
<h4 id="hostshostnameprocessesenvironment"><a class="header" href="#hostshostnameprocessesenvironment"><code>hosts.&lt;hostname&gt;.processes[*].environment</code></a></h4>
<p>Default: &quot;&quot;<br />
Type: String</p>
<p>Environment variables passed when executing this process. Multiple variables can
be specified by using a semicolon separator (ex: <code>ENV_A=1;ENV_B=2</code>).</p>
<h4 id="hostshostnameprocessespath"><a class="header" href="#hostshostnameprocessespath"><code>hosts.&lt;hostname&gt;.processes[*].path</code></a></h4>
<p><em>Required</em><br />
Type: String</p>
<p>If the path begins with <code>~/</code>, it will be considered relative to the current
user's home directory.</p>
<h4 id="hostshostnameprocessesquantity"><a class="header" href="#hostshostnameprocessesquantity"><code>hosts.&lt;hostname&gt;.processes[*].quantity</code></a></h4>
<p>Default: 1<br />
Type: Integer</p>
<p>The number of replicas of this process to execute.</p>
<h4 id="hostshostnameprocessesstart_time"><a class="header" href="#hostshostnameprocessesstart_time"><code>hosts.&lt;hostname&gt;.processes[*].start_time</code></a></h4>
<p>Default: &quot;0 sec&quot;<br />
Type: String OR Integer</p>
<p>The simulated time at which to execute the process.</p>
<h4 id="hostshostnameprocessesstop_time"><a class="header" href="#hostshostnameprocessesstop_time"><code>hosts.&lt;hostname&gt;.processes[*].stop_time</code></a></h4>
<p>Default: null<br />
Type: String OR Integer OR null</p>
<p>The simulated time at which to send a SIGKILL signal to the process.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="shadow_config_overview.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="network_graph_overview.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="shadow_config_overview.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="network_graph_overview.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
